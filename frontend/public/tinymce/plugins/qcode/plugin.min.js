!function(c,u){"use strict";var r={};function e(e,t,n){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(t===u)throw"invalid module definition, dependencies must be specified";if(n===u)throw"invalid module definition, definition function must be specified";!function(e,t){for(var n,i=[],a=0;a<e.length;++a){if(!(n=r[e[a]]||o(e[a])))throw"module definition dependecy not found: "+e[a];i.push(n)}t.apply(null,i)}(t,function(){r[e]=n.apply(null,arguments)})}function o(e){for(var t=c,n=e.split(/[.\/]/),i=0;i<n.length;++i){if(!t[n[i]])return;t=t[n[i]]}return t}e("tinymce/qcodeplugin/Utils",[],function(){return{isCodeSample:function(e){return e&&"PRE"==e.nodeName&&-1!==e.className.indexOf("language-")},trimArg:function(n){return function(e,t){return n(t)}}}}),e("tinymce/qcodeplugin/Dialog",["tinymce/dom/DOMUtils","tinymce/qcodeplugin/Utils"],function(e,n){var o=e.DOM,i=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}];function l(e){var t=e.selection.getNode();return n.isCodeSample(t)?t:null}return{open:function(a){var e,t,n;a.windowManager.open({title:"درج/ویرایش نمونه کد",minWidth:Math.min(o.getViewPort().w,600),minHeight:Math.min(o.getViewPort().h,400),layout:"fit",body:[{type:"listbox",name:"language",label:"زبان",maxWidth:200,value:(n=l(a))&&(t=n.className.match(/language-(\w+)/))?t[1]:"",values:i},{type:"textbox",name:"code",multiline:!0,spellcheck:!1,ariaLabel:"Code view",flex:1,style:"direction: ltr; text-align: left",classes:"monospace",value:(e=l(a))?e.textContent:"",autofocus:!0}],onSubmit:function(e){var t,n,i;t=a,n=e.data.language,i=e.data.code,t.undoManager.transact(function(){var e=l(t);i=o.encode(i),e?(t.dom.setAttrib(e,"class","language-"+n),e.innerHTML=i,Prism.highlightElement(e),t.selection.select(e)):(t.insertContent('<pre id="__new" class="language-'+n+'">'+i+"</pre>"),t.selection.select(t.$("#__new").removeAttr("id")[0]))})}})}}}),e("tinymce/qcodeplugin/Plugin",["tinymce/Env","tinymce/PluginManager","tinymce/qcodeplugin/Dialog","tinymce/qcodeplugin/Utils"],function(n,e,o,l){var c,u=l.trimArg;e.add("qcode",function(i,e){var t,a=i.$;n.ceFalse&&(i.on("PreProcess",function(e){a("pre[contenteditable=false]",e.node).filter(u(l.isCodeSample)).each(function(e,t){var n=a(t),i=t.textContent;n.attr("class",a.trim(n.attr("class"))),n.removeAttr("contentEditable"),n.empty().append(a("<code></code>").each(function(){this.textContent=i}))})}),i.on("SetContent",function(){var e=a("pre").filter(u(l.isCodeSample)).filter(function(e,t){return"false"!==t.contentEditable});e.length&&i.undoManager.transact(function(){e.each(function(e,t){a(t).find("br").each(function(e,t){t.parentNode.replaceChild(i.getDoc().createTextNode("\n"),t)}),t.contentEditable=!1,t.innerHTML=i.dom.encode(t.textContent),Prism.highlightElement(t),t.className=a.trim(t.className)})})}),i.addCommand("qcode",function(){o.open(i)}),i.addButton("qcode",{image:e+"/img/qcode.png",cmd:"qcode",title:"اضافه کردن/ویرایش کد"}),i.on("DblClick",function(e,t){var n=e.target;n&&"PRE"==n.nodeName&&-1!==n.className.indexOf("language-")&&o.open(i)}),i.on("init",function(){i.inline&&c||!i.inline&&t||(i.inline?c=!0:t=!0)}))})}),function(e){var t,n,i,a,o;for(t=0;t<e.length;t++){n=c,a=(i=e[t]).split(/[.\/]/);for(var l=0;l<a.length-1;++l)n[a[l]]===u&&(n[a[l]]={}),n=n[a[l]];n[a[a.length-1]]=r[i]}if(c.AMDLC_TESTS){for(i in o=c.privateModules||{},r)o[i]=r[i];for(t=0;t<e.length;t++)delete o[e[t]];c.privateModules=o}}(["tinymce/qcodeplugin/Prism","tinymce/qcodeplugin/Utils","tinymce/qcodeplugin/Dialog","tinymce/qcodeplugin/Plugin"])}(this);